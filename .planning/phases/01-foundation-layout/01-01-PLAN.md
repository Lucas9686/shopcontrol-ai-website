---
phase: 01-foundation-layout
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - i18n/routing.ts
  - i18n/request.ts
  - i18n/navigation.ts
  - proxy.ts
  - next.config.mjs
  - messages/de.json
  - messages/en.json
  - app/layout.tsx
  - app/page.tsx
  - app/[locale]/layout.tsx
  - app/[locale]/page.tsx
  - app/[locale]/not-found.tsx
  - app/globals.css
  - package.json
autonomous: true

must_haves:
  truths:
    - "Visiting / redirects to /de"
    - "Visiting /de and /en renders locale-specific content"
    - "CSS variables use dark blue hue 260 OKLCH palette"
    - "pnpm build succeeds with no errors"
  artifacts:
    - path: "i18n/routing.ts"
      provides: "Locale routing config"
      contains: "defineRouting"
    - path: "proxy.ts"
      provides: "next-intl middleware for Next.js 16"
      contains: "createMiddleware"
    - path: "app/[locale]/layout.tsx"
      provides: "Locale layout with NextIntlClientProvider"
      contains: "NextIntlClientProvider"
    - path: "messages/de.json"
      provides: "German translations"
    - path: "messages/en.json"
      provides: "English translations"
  key_links:
    - from: "proxy.ts"
      to: "i18n/routing.ts"
      via: "import routing"
      pattern: "import.*routing"
    - from: "next.config.mjs"
      to: "i18n/request.ts"
      via: "createNextIntlPlugin"
      pattern: "createNextIntlPlugin"
    - from: "app/[locale]/layout.tsx"
      to: "messages/*.json"
      via: "getMessages()"
      pattern: "getMessages"
---

<objective>
Set up Next.js project with next-intl i18n routing (DE/EN), dark blue OKLCH theme, and locale-segmented app directory structure.

Purpose: All subsequent plans depend on working i18n routing and theme. This is the foundation.
Output: Working bilingual app shell -- visiting /de or /en renders a locale-specific page, dark blue theme applied globally.
</objective>

<execution_context>
@C:\Users\Lucas Benutzer\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\Lucas Benutzer\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/01-foundation-layout/01-RESEARCH.md
@Web design/app/layout.tsx
@Web design/app/page.tsx
@Web design/app/globals.css
@Web design/next.config.mjs
@Web design/package.json
@Web design/components/theme-provider.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install dependencies and set up i18n infrastructure</name>
  <files>
    package.json
    i18n/routing.ts
    i18n/request.ts
    i18n/navigation.ts
    proxy.ts
    next.config.mjs
    messages/de.json
    messages/en.json
  </files>
  <action>
1. Run `pnpm add next-intl sharp` in the project root (NOT in "Web design/").

2. Create `i18n/routing.ts`:
```typescript
import { defineRouting } from 'next-intl/routing';
export const routing = defineRouting({
  locales: ['de', 'en'],
  defaultLocale: 'de'
});
```

3. Create `i18n/request.ts`:
```typescript
import { getRequestConfig } from 'next-intl/server';
import { hasLocale } from 'next-intl';
import { routing } from './routing';
export default getRequestConfig(async ({ requestLocale }) => {
  const requested = await requestLocale;
  const locale = hasLocale(routing.locales, requested) ? requested : routing.defaultLocale;
  return {
    locale,
    messages: (await import(`../messages/${locale}.json`)).default
  };
});
```

4. Create `i18n/navigation.ts`:
```typescript
import { createNavigation } from 'next-intl/navigation';
import { routing } from './routing';
export const { Link, redirect, usePathname, useRouter, getPathname } = createNavigation(routing);
```

5. Create `proxy.ts` (NOT middleware.ts -- Next.js 16 uses proxy.ts):
```typescript
import createMiddleware from 'next-intl/middleware';
import { routing } from './i18n/routing';
export default createMiddleware(routing);
export const config = {
  matcher: '/((?!api|trpc|_next|_vercel|.*\\..*).*)'
};
```

6. Update `next.config.mjs` -- wrap with createNextIntlPlugin pointing to `./i18n/request.ts`. Keep existing config (images formats etc). Reference the existing template's next.config.mjs for any settings to preserve.

7. Create `messages/de.json` and `messages/en.json` with initial keys:
```json
{
  "nav": {
    "home": "Startseite" / "Home",
    "problem": "Problem",
    "solution": "Loesung" / "Solution",
    "technology": "Technologie" / "Technology",
    "results": "Ergebnisse" / "Results",
    "about": "Ueber uns" / "About"
  },
  "hero": {
    "headline": "ShopControl AI" (same both),
    "subheadline": "KI-gestuetzte Automatisierung fuer Online-Shops" / "AI-Powered Automation for Online Shops",
    "cta": "Mehr erfahren" / "Learn more"
  },
  "footer": {
    "project": "Ein Projekt der HTL Klagenfurt" / "A project by HTL Klagenfurt",
    "copyright": "ShopControl AI - Jugend Innovativ 2026"
  }
}
```
Use proper German umlauts (ae->ä, oe->ö, ue->ü) in actual JSON.
  </action>
  <verify>
Run `pnpm build` -- should compile without errors. Check that next-intl and sharp appear in node_modules.
  </verify>
  <done>
i18n infrastructure files exist, messages defined for DE/EN, next.config.mjs wraps with next-intl plugin, proxy.ts handles locale routing.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create locale app directory structure with dark blue theme</name>
  <files>
    app/layout.tsx
    app/page.tsx
    app/[locale]/layout.tsx
    app/[locale]/page.tsx
    app/[locale]/not-found.tsx
    app/globals.css
  </files>
  <action>
1. Update `app/globals.css` -- copy from the existing template (`Web design/app/globals.css`) but change the `.dark` CSS variables to use dark blue hue 260 OKLCH. Specifically set:
   - `--background: oklch(0.13 0.02 260);`
   - `--foreground: oklch(0.95 0.01 260);`
   - `--card: oklch(0.16 0.02 260);`
   - `--secondary: oklch(0.22 0.03 260);`
   - `--muted: oklch(0.22 0.02 260);`
   - `--accent: oklch(0.25 0.04 260);`
   - `--border: oklch(0.25 0.03 260);`
   - `--primary: oklch(0.985 0 0);`
   - `--primary-foreground: oklch(0.13 0.02 260);`
   Keep all other variables (ring, input, destructive, etc.) adjusted to hue 260 as well. Keep chroma low (0.02-0.03).

2. Create `app/layout.tsx` as bare root layout -- just returns `{children}` with no `<html>` or `<body>` tags (those go in locale layout). This is needed because next-intl locale layout wraps html/body.

3. Create `app/page.tsx` -- redirect "/" to "/de" using `redirect` from next/navigation.

4. Create `app/[locale]/layout.tsx`:
   - Import NextIntlClientProvider, hasLocale from next-intl
   - Import getMessages, setRequestLocale from next-intl/server
   - Import routing from @/i18n/routing
   - Import fonts (use Inter from next/font/google)
   - Export generateStaticParams returning locales
   - Async function: await params, validate locale with hasLocale, call setRequestLocale, get messages
   - Return `<html lang={locale} className="dark">` with `<body>` wrapping NextIntlClientProvider with children
   - Do NOT add navbar/footer yet (Plan 02 handles that)

5. Create `app/[locale]/page.tsx`:
   - Import useTranslations from next-intl
   - Simple page rendering hero.headline and hero.subheadline from translations
   - Add setRequestLocale call for static rendering
   - Just render the translated text in a centered div for now (Plan 02 builds the real hero)

6. Create `app/[locale]/not-found.tsx` with a simple "Page not found" message.
  </action>
  <verify>
Run `pnpm dev`, visit http://localhost:3000 -- should redirect to /de. Visit /en -- should show English text. Visit /de -- should show German text. Background should be dark blue, not zinc/gray. Run `pnpm build` to confirm no errors.
  </verify>
  <done>
Visiting / redirects to /de. Both /de and /en render locale-specific translated content. Dark blue OKLCH theme is visible. Build passes.
  </done>
</task>

</tasks>

<verification>
1. `pnpm build` succeeds with zero errors
2. `http://localhost:3000/` redirects to `/de`
3. `/de` shows German text, `/en` shows English text
4. Background color is dark blue (not zinc gray)
5. No console errors in browser
</verification>

<success_criteria>
- next-intl i18n routing works with [locale] segment for DE and EN
- Dark blue OKLCH theme applied globally via CSS variables
- Build compiles successfully
- Root / redirects to /de
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-layout/01-01-SUMMARY.md`
</output>
