---
phase: 08-supportagent-buchhaltungstool
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - webapp/components/shared/workflow-step-vertical.tsx
  - webapp/app/[locale]/support-agent/page.tsx
  - webapp/messages/de.json
  - webapp/messages/en.json
autonomous: true

must_haves:
  truths:
    - "Support Agent page shows Problem section describing email support burden"
    - "Support Agent page shows Solution section describing autonomous AI agent"
    - "Support Agent page shows 6 workflow steps in vertical timeline with images"
    - "Support Agent page shows RAG, Tools, and Security brief sections"
    - "Both DE and EN translations are complete for supportAgent namespace"
  artifacts:
    - path: "webapp/components/shared/workflow-step-vertical.tsx"
      provides: "Vertical timeline workflow step component"
      min_lines: 20
    - path: "webapp/app/[locale]/support-agent/page.tsx"
      provides: "Full Support Agent page with all sections"
      min_lines: 80
    - path: "webapp/messages/de.json"
      provides: "supportAgent namespace with all translation keys"
      contains: "supportAgent"
    - path: "webapp/messages/en.json"
      provides: "supportAgent namespace with all translation keys"
      contains: "supportAgent"
  key_links:
    - from: "webapp/app/[locale]/support-agent/page.tsx"
      to: "webapp/components/shared/workflow-step-vertical.tsx"
      via: "import WorkflowStepVertical"
      pattern: "WorkflowStepVertical"
    - from: "webapp/app/[locale]/support-agent/page.tsx"
      to: "webapp/messages/de.json"
      via: "getTranslations('supportAgent')"
      pattern: "getTranslations.*supportAgent"
---

<objective>
Build the Support Agent page with Problem -> Solution -> 6-step vertical workflow -> RAG/Tools/Security sections, plus create the reusable WorkflowStepVertical component.

Purpose: Replace the placeholder Support Agent page with full content showing the AI email support workflow, making the technical depth visible to Jugend Innovativ jury.
Output: Working Support Agent page with vertical timeline, all DE/EN translations, and new WorkflowStepVertical component.
</objective>

<execution_context>
@C:\Users\Lucas Benutzer\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\Lucas Benutzer\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/08-supportagent-buchhaltungstool/08-CONTEXT.md
@.planning/phases/08-supportagent-buchhaltungstool/08-RESEARCH.md

# Existing components to reuse
@webapp/components/technology/workflow-step.tsx
@webapp/components/shared/section-header.tsx
@webapp/components/shared/fade-in-section.tsx
@webapp/components/features/feature-card.tsx
@webapp/components/technology/screenshot-figure.tsx

# Current page stub
@webapp/app/[locale]/support-agent/page.tsx

# Current Technology page (content being moved FROM here)
@webapp/app/[locale]/technology/page.tsx

# Translation files
@webapp/messages/de.json
@webapp/messages/en.json
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create WorkflowStepVertical component</name>
  <files>webapp/components/shared/workflow-step-vertical.tsx</files>
  <action>
Create a new vertical timeline workflow step component. This is different from the existing WorkflowStep (which uses alternating left/right grid layout). The vertical version stacks: number badge + title, description paragraph, then full-width image below.

Props interface:
```typescript
interface WorkflowStepVerticalProps {
  number: number;
  title: string;
  description: string;
  imageSrc?: string;  // Optional — some steps may not have images
  imageAlt?: string;
}
```

Layout:
- Wrap in FadeInSection
- Left border with primary color (timeline line effect): `border-l-2 border-primary pl-6 relative`
- Number badge: same circle style as existing WorkflowStep (h-8 w-8 rounded-full bg-primary)
- Position the badge on the left border line using absolute positioning
- Title as h3 next to badge
- Description as paragraph below
- If imageSrc provided, show image in rounded border container below description (full width, same style as existing WorkflowStep image container)
- Use next/image with width={1200} height={675}

Follow the exact same coding patterns as workflow-step.tsx (imports, export style, className patterns).
  </action>
  <verify>File exists at webapp/components/shared/workflow-step-vertical.tsx, exports WorkflowStepVertical, TypeScript compiles.</verify>
  <done>WorkflowStepVertical component renders a vertical timeline step with optional image, matching project design patterns.</done>
</task>

<task type="auto">
  <name>Task 2: Add Support Agent translations (DE + EN)</name>
  <files>webapp/messages/de.json, webapp/messages/en.json</files>
  <action>
Replace the existing minimal supportAgent keys in both de.json and en.json with full content. The content must match the Projektbericht.

**DE translation keys for "supportAgent" namespace:**

```json
{
  "supportAgent": {
    "title": "KI-Supportagent",
    "subtitle": "Vollautonome E-Mail-Kundenbetreuung mit KI",
    "problem": {
      "title": "Das Problem",
      "description": "Kleine Online-Shop-Betreiber verbringen Stunden täglich mit repetitiven Support-Anfragen — Bestellstatus, Retouren, Produktfragen. Das bindet wertvolle Zeit, die für Wachstum fehlt."
    },
    "solution": {
      "title": "Die Lösung",
      "description": "Ein vollautonomer KI-Agent, der E-Mail-Anfragen selbstständig bearbeitet — von der Analyse über die Recherche bis zur personalisierten Antwort. Ohne menschliches Eingreifen, rund um die Uhr."
    },
    "workflow": {
      "title": "6-Schritte-Workflow",
      "subtitle": "So verarbeitet der Agent jede Kundenanfrage",
      "step1": {
        "title": "E-Mails abrufen",
        "description": "Der Workflow wird durch einen Zeitplan-Trigger gestartet und ruft alle neuen E-Mails aus dem Support-Postfach über IMAP ab."
      },
      "step2": {
        "title": "E-Mails filtern",
        "description": "Automatische Antworten, Newsletter und irrelevante Nachrichten werden herausgefiltert. Nur echte Kundenanfragen werden weiterverarbeitet."
      },
      "step3": {
        "title": "Bildanalyse",
        "description": "Falls die E-Mail Bilder enthält (z.B. Fotos von beschädigten Produkten), werden diese mit GPT-4o Vision analysiert und die Beschreibung wird dem Kontext hinzugefügt."
      },
      "step4": {
        "title": "KI-Agent verarbeitet Anfrage",
        "description": "Der Haupt-Agent analysiert die Anfrage, nutzt RAG für Wissensbasis-Suche und greift auf Tools wie Shopify-API und Google Sheets zu, um relevante Daten abzurufen."
      },
      "step5": {
        "title": "Antwort senden",
        "description": "Die generierte Antwort wird als professionelle E-Mail formatiert und automatisch an den Kunden gesendet."
      },
      "step6": {
        "title": "Performance-Logging",
        "description": "Jede verarbeitete Anfrage wird protokolliert — Antwortzeit, Token-Verbrauch, genutztes Modell und Kategorie — für Qualitätskontrolle und Optimierung."
      }
    },
    "rag": {
      "title": "RAG-Wissenssystem",
      "description": "Der Agent nutzt Retrieval-Augmented Generation (RAG) mit einer Qdrant-Vektordatenbank. Produktinformationen, FAQ-Einträge und Unternehmensrichtlinien werden als Embeddings gespeichert und bei jeder Anfrage durchsucht.",
      "link": "Mehr zur technischen Architektur auf der Technologien-Seite."
    },
    "tools": {
      "title": "Tools & Sub-Agents",
      "description": "Der Agent greift auf spezialisierte Tools zu: Shopify-API für Bestelldaten, Google Sheets für interne Daten, und einen Retourenmanagement-Sub-Agent für komplexe Rücksendungen.",
      "link": "Details zur Tool-Integration auf der Technologien-Seite."
    },
    "security": {
      "title": "Sicherheitsfeatures",
      "description": "Vier Sicherheitsebenen schützen vor Fehlfunktionen: Error-Trigger bei Workflow-Fehlern, Confidence-basierte Eskalation an Menschen, automatische Backup-Antworten und vollständige Antwortprotokollierung.",
      "link": "Mehr zu Sicherheitskonzepten auf der Technologien-Seite."
    }
  }
}
```

**EN translation keys for "supportAgent" namespace:**

```json
{
  "supportAgent": {
    "title": "AI Support Agent",
    "subtitle": "Fully autonomous AI-powered email customer support",
    "problem": {
      "title": "The Problem",
      "description": "Small online store owners spend hours daily handling repetitive support inquiries — order status, returns, product questions. This ties up valuable time that could be spent on growth."
    },
    "solution": {
      "title": "The Solution",
      "description": "A fully autonomous AI agent that handles email inquiries independently — from analysis through research to personalized responses. Without human intervention, around the clock."
    },
    "workflow": {
      "title": "6-Step Workflow",
      "subtitle": "How the agent processes each customer inquiry",
      "step1": {
        "title": "Fetch Emails",
        "description": "The workflow is triggered on a schedule and retrieves all new emails from the support inbox via IMAP."
      },
      "step2": {
        "title": "Filter Emails",
        "description": "Auto-replies, newsletters, and irrelevant messages are filtered out. Only genuine customer inquiries are processed further."
      },
      "step3": {
        "title": "Image Analysis",
        "description": "If the email contains images (e.g., photos of damaged products), these are analyzed using GPT-4o Vision and the description is added to the context."
      },
      "step4": {
        "title": "AI Agent Processes Request",
        "description": "The main agent analyzes the inquiry, uses RAG for knowledge base search, and accesses tools like the Shopify API and Google Sheets to retrieve relevant data."
      },
      "step5": {
        "title": "Send Response",
        "description": "The generated response is formatted as a professional email and automatically sent to the customer."
      },
      "step6": {
        "title": "Performance Logging",
        "description": "Every processed inquiry is logged — response time, token usage, model used, and category — for quality control and optimization."
      }
    },
    "rag": {
      "title": "RAG Knowledge System",
      "description": "The agent uses Retrieval-Augmented Generation (RAG) with a Qdrant vector database. Product information, FAQ entries, and company policies are stored as embeddings and searched with every inquiry.",
      "link": "More about the technical architecture on the Technology page."
    },
    "tools": {
      "title": "Tools & Sub-Agents",
      "description": "The agent accesses specialized tools: Shopify API for order data, Google Sheets for internal data, and a returns management sub-agent for complex return cases.",
      "link": "Details about tool integration on the Technology page."
    },
    "security": {
      "title": "Security Features",
      "description": "Four security layers protect against malfunctions: error triggers on workflow failures, confidence-based escalation to humans, automatic backup responses, and complete response logging.",
      "link": "More about security concepts on the Technology page."
    }
  }
}
```

IMPORTANT: Only replace the `"supportAgent": { ... }` block in each JSON file. Do NOT modify any other keys. Keep the rest of the file intact.
  </action>
  <verify>Run `cd webapp && npx next build 2>&1 | head -30` — no translation key errors. Grep for "placeholder" in supportAgent section — should not appear.</verify>
  <done>Both de.json and en.json have full supportAgent translations with problem, solution, workflow (6 steps), rag, tools, and security keys.</done>
</task>

<task type="auto">
  <name>Task 3: Build Support Agent page</name>
  <files>webapp/app/[locale]/support-agent/page.tsx</files>
  <action>
Replace the placeholder page with a full Support Agent page. Use the translation keys from Task 2.

Page structure (follow existing Technology page pattern for imports and async page setup):

```typescript
import { getTranslations, setRequestLocale } from "next-intl/server";
import { Shield, Database, ShoppingCart, FileSpreadsheet } from "lucide-react";
import { SectionHeader } from "@/components/shared/section-header";
import { FadeInSection } from "@/components/shared/fade-in-section";
import { FeatureCard } from "@/components/features/feature-card";
import { WorkflowStepVertical } from "@/components/shared/workflow-step-vertical";
import { Link } from "@/i18n/routing";
```

Sections in order:

1. **Header** — h1 with t("title"), subtitle with t("subtitle")

2. **Problem section** — FadeInSection with SectionHeader t("problem.title"), paragraph t("problem.description"). Use a subtle red/warning accent (e.g., a left border-l-4 border-destructive on the description container, with bg-destructive/5 p-6 rounded-lg).

3. **Solution section** — FadeInSection with SectionHeader t("solution.title"), paragraph t("solution.description"). Use a green/success accent (border-l-4 border-emerald-500, bg-emerald-500/5 p-6 rounded-lg).

4. **Workflow section** — FadeInSection with SectionHeader t("workflow.title") subtitle t("workflow.subtitle"). Then render 6 WorkflowStepVertical components with these images:
   - step1: /images/workflows/get-emails.png
   - step2: /images/workflows/filter-sektion.png
   - step3: /images/workflows/bildanalyse-sektion.png
   - step4: /images/workflows/support-agent-mit-tools.png
   - step5: /images/workflows/send-emails.png
   - step6: /images/workflows/performance-logging.png

5. **RAG section** — FadeInSection with SectionHeader t("rag.title"), paragraph t("rag.description"), small muted text with t("rag.link").

6. **Tools section** — FadeInSection with SectionHeader t("tools.title"), paragraph t("tools.description"), small muted text with t("tools.link").

7. **Security section** — FadeInSection with SectionHeader t("security.title"), paragraph t("security.description"), small muted text with t("security.link").

Use `<article className="mx-auto max-w-5xl px-4 pt-24 pb-16">` as the root wrapper (same as Technology page).

Spacing: mt-16 between major sections, mt-10 for workflow steps container with space-y-8 between steps.
  </action>
  <verify>Run `cd webapp && npx next build` — builds without errors. Visit /de/support-agent and /en/support-agent in dev server — page renders with all sections.</verify>
  <done>Support Agent page renders all sections: header, problem, solution, 6 workflow steps with images, RAG, tools, security. Both DE and EN work.</done>
</task>

</tasks>

<verification>
1. `cd webapp && npx next build` completes without errors
2. Support Agent page at /de/support-agent shows all 7 sections with German text
3. Support Agent page at /en/support-agent shows all 7 sections with English text
4. All 6 workflow images render correctly
5. WorkflowStepVertical component is reusable (used 6 times on page)
</verification>

<success_criteria>
- Support Agent page fully replaces placeholder with Problem -> Solution -> 6-step workflow -> RAG -> Tools -> Security
- All workflow step images from /images/workflows/ render
- DE and EN translations complete (no "placeholder" text remains)
- Page follows existing design patterns (FadeInSection, SectionHeader, same spacing)
- Build succeeds
</success_criteria>

<output>
After completion, create `.planning/phases/08-supportagent-buchhaltungstool/08-01-SUMMARY.md`
</output>
