---
phase: 08-supportagent-buchhaltungstool
plan: 02
type: execute
wave: 2
depends_on: ["08-01"]
files_modified:
  - webapp/public/images/accounting/workflow-overview.png
  - webapp/public/images/accounting/workflow-n8n.png
  - webapp/app/[locale]/accounting/page.tsx
  - webapp/messages/de.json
  - webapp/messages/en.json
autonomous: true

must_haves:
  truths:
    - "Accounting page shows Problem section describing scattered financial data"
    - "Accounting page shows Solution section describing automated WhatsApp reporting"
    - "Accounting page shows 5 workflow steps in vertical timeline"
    - "Accounting page shows data sources and WhatsApp trigger integrated into steps"
    - "Both DE and EN translations are complete for accounting namespace"
  artifacts:
    - path: "webapp/app/[locale]/accounting/page.tsx"
      provides: "Full Accounting page with all sections"
      min_lines: 60
    - path: "webapp/public/images/accounting/workflow-overview.png"
      provides: "Accounting workflow overview screenshot"
    - path: "webapp/public/images/accounting/workflow-n8n.png"
      provides: "Accounting n8n workflow screenshot"
    - path: "webapp/messages/de.json"
      provides: "accounting namespace with all translation keys"
      contains: "accounting"
    - path: "webapp/messages/en.json"
      provides: "accounting namespace with all translation keys"
      contains: "accounting"
  key_links:
    - from: "webapp/app/[locale]/accounting/page.tsx"
      to: "webapp/components/shared/workflow-step-vertical.tsx"
      via: "import WorkflowStepVertical"
      pattern: "WorkflowStepVertical"
    - from: "webapp/app/[locale]/accounting/page.tsx"
      to: "webapp/messages/de.json"
      via: "getTranslations('accounting')"
      pattern: "getTranslations.*accounting"
---

<objective>
Build the Accounting/Buchhaltungstool page with Problem -> Solution -> 5-step workflow, copy images from Matrealien, and add DE/EN translations.

Purpose: Replace the placeholder Accounting page with full content showing the automated financial reporting workflow with WhatsApp delivery.
Output: Working Accounting page with vertical timeline, copied images, and all DE/EN translations.
</objective>

<execution_context>
@C:\Users\Lucas Benutzer\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\Lucas Benutzer\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/08-supportagent-buchhaltungstool/08-CONTEXT.md
@.planning/phases/08-supportagent-buchhaltungstool/08-RESEARCH.md
@.planning/phases/08-supportagent-buchhaltungstool/08-01-SUMMARY.md

# Reuse vertical step component from Plan 01
@webapp/components/shared/workflow-step-vertical.tsx

# Current page stub
@webapp/app/[locale]/accounting/page.tsx

# Translation files
@webapp/messages/de.json
@webapp/messages/en.json

# Source images
# Matrealien/Buchaltungs_workflow_ablauf.png -> webapp/public/images/accounting/workflow-overview.png
# Matrealien/Buchhaltungs_Workflow_in_N8N.png -> webapp/public/images/accounting/workflow-n8n.png
</context>

<tasks>

<task type="auto">
  <name>Task 1: Copy accounting images and add translations</name>
  <files>
    webapp/public/images/accounting/workflow-overview.png
    webapp/public/images/accounting/workflow-n8n.png
    webapp/messages/de.json
    webapp/messages/en.json
  </files>
  <action>
**Step 1: Copy images**

```bash
mkdir -p webapp/public/images/accounting
cp "Matrealien/Buchaltungs_workflow_ablauf.png" webapp/public/images/accounting/workflow-overview.png
cp "Matrealien/Buchhaltungs_Workflow_in_N8N.png" webapp/public/images/accounting/workflow-n8n.png
```

**Step 2: Add accounting translations**

Replace the existing minimal `"accounting": { ... }` block (the one with "title" and "placeholder" at the bottom of each JSON, NOT the homepage features.accounting block) in both de.json and en.json.

**DE keys:**
```json
{
  "accounting": {
    "title": "Buchhaltungstool",
    "subtitle": "Automatische Finanzberichterstattung per WhatsApp",
    "problem": {
      "title": "Das Problem",
      "description": "Online-Shop-Betreiber müssen Finanzdaten aus verschiedenen Quellen — Shopify, Facebook Ads, Bankkonten — manuell zusammenführen. Kennzahlen berechnen, Berichte erstellen: Das kostet Stunden pro Woche und ist fehleranfällig."
    },
    "solution": {
      "title": "Die Lösung",
      "description": "Ein automatisierter Workflow, der alle relevanten Finanzdaten sammelt, zentrale KPIs berechnet und als übersichtlichen Bericht per WhatsApp versendet — auf Knopfdruck oder automatisch monatlich."
    },
    "workflow": {
      "title": "5-Schritte-Workflow",
      "subtitle": "So entsteht der automatische Finanzbericht",
      "step1": {
        "title": "Daten abrufen",
        "description": "Der Workflow fragt automatisch Umsatzdaten von Shopify, Werbeausgaben von Facebook Ads und Kontobewegungen von der Bank ab."
      },
      "step2": {
        "title": "KPIs berechnen",
        "description": "Aus den Rohdaten werden zentrale Kennzahlen berechnet: Gesamtumsatz, Werbekosten, Return on Ad Spend (ROAS), Gewinnmarge und weitere KPIs."
      },
      "step3": {
        "title": "Bericht generieren",
        "description": "Die berechneten KPIs werden in einen übersichtlichen, formatierten Bericht zusammengestellt — mit Vergleichen zum Vormonat und Trendanalysen."
      },
      "step4": {
        "title": "WhatsApp-Versand",
        "description": "Der fertige Bericht wird automatisch per WhatsApp an den Shop-Betreiber gesendet. Der Versand kann per Nachricht ausgelöst oder als monatlicher Zeitplan konfiguriert werden."
      },
      "step5": {
        "title": "Archivierung",
        "description": "Alle Berichte werden in Google Sheets archiviert, um langfristige Trends nachverfolgen und historische Daten vergleichen zu können."
      }
    },
    "overview": {
      "title": "Workflow-Überblick",
      "caption": "Gesamtablauf des Buchhaltungs-Workflows"
    },
    "n8n": {
      "title": "Technische Umsetzung",
      "description": "Der gesamte Workflow ist in n8n als automatisierte Pipeline implementiert — von den API-Abfragen über die Berechnung bis zum WhatsApp-Versand.",
      "caption": "Der Buchhaltungs-Workflow in n8n"
    }
  }
}
```

**EN keys:**
```json
{
  "accounting": {
    "title": "Accounting Tool",
    "subtitle": "Automated financial reporting via WhatsApp",
    "problem": {
      "title": "The Problem",
      "description": "Online store owners must manually consolidate financial data from various sources — Shopify, Facebook Ads, bank accounts. Calculating metrics and creating reports costs hours per week and is error-prone."
    },
    "solution": {
      "title": "The Solution",
      "description": "An automated workflow that collects all relevant financial data, calculates key KPIs, and sends them as a clear report via WhatsApp — on demand or automatically on a monthly basis."
    },
    "workflow": {
      "title": "5-Step Workflow",
      "subtitle": "How the automatic financial report is created",
      "step1": {
        "title": "Fetch Data",
        "description": "The workflow automatically queries revenue data from Shopify, advertising spend from Facebook Ads, and account movements from the bank."
      },
      "step2": {
        "title": "Calculate KPIs",
        "description": "Key metrics are calculated from the raw data: total revenue, advertising costs, Return on Ad Spend (ROAS), profit margin, and other KPIs."
      },
      "step3": {
        "title": "Generate Report",
        "description": "The calculated KPIs are compiled into a clear, formatted report — with comparisons to the previous month and trend analyses."
      },
      "step4": {
        "title": "WhatsApp Delivery",
        "description": "The finished report is automatically sent via WhatsApp to the store owner. Delivery can be triggered by message or configured as a monthly schedule."
      },
      "step5": {
        "title": "Archival",
        "description": "All reports are archived in Google Sheets to track long-term trends and compare historical data."
      }
    },
    "overview": {
      "title": "Workflow Overview",
      "caption": "Complete accounting workflow process"
    },
    "n8n": {
      "title": "Technical Implementation",
      "description": "The entire workflow is implemented in n8n as an automated pipeline — from API queries through calculation to WhatsApp delivery.",
      "caption": "The accounting workflow in n8n"
    }
  }
}
```

IMPORTANT: There are TWO places "accounting" appears in de.json/en.json:
1. Under `homepage.features.accounting` — DO NOT TOUCH THIS
2. The standalone `"accounting": { "title": "...", "placeholder": "..." }` near the bottom — REPLACE THIS ONE

Be careful to only replace the standalone accounting namespace, not the homepage features one.
  </action>
  <verify>Images exist at webapp/public/images/accounting/workflow-overview.png and workflow-n8n.png. Grep de.json for "accounting.*placeholder" — should not match.</verify>
  <done>Accounting images copied with clean names. DE and EN translations complete for accounting namespace with problem, solution, 5 workflow steps, overview, and n8n sections.</done>
</task>

<task type="auto">
  <name>Task 2: Build Accounting page</name>
  <files>webapp/app/[locale]/accounting/page.tsx</files>
  <action>
Replace the placeholder Accounting page with full content. Use the WorkflowStepVertical component from Plan 01 and the translation keys from Task 1.

Page structure (same pattern as Support Agent page):

```typescript
import { getTranslations, setRequestLocale } from "next-intl/server";
import { SectionHeader } from "@/components/shared/section-header";
import { FadeInSection } from "@/components/shared/fade-in-section";
import { WorkflowStepVertical } from "@/components/shared/workflow-step-vertical";
import { ScreenshotFigure } from "@/components/technology/screenshot-figure";
```

Sections in order:

1. **Header** — h1 with t("title"), subtitle with t("subtitle")

2. **Problem section** — Same styling as Support Agent problem section (border-l-4 border-destructive, bg-destructive/5 p-6 rounded-lg). SectionHeader t("problem.title"), paragraph t("problem.description").

3. **Solution section** — Same styling as Support Agent solution section (border-l-4 border-emerald-500, bg-emerald-500/5 p-6 rounded-lg). SectionHeader t("solution.title"), paragraph t("solution.description").

4. **Workflow Overview** — FadeInSection with ScreenshotFigure showing /images/accounting/workflow-overview.png with caption t("overview.caption").

5. **Workflow section** — FadeInSection with SectionHeader t("workflow.title") subtitle t("workflow.subtitle"). Then 5 WorkflowStepVertical components:
   - step1-step5: NO images (only 2 images available, used in overview/n8n sections)

6. **Technical Implementation (n8n)** — FadeInSection with SectionHeader t("n8n.title"), paragraph t("n8n.description"), ScreenshotFigure showing /images/accounting/workflow-n8n.png with caption t("n8n.caption").

Use `<article className="mx-auto max-w-5xl px-4 pt-24 pb-16">` as root wrapper.
Same spacing as Support Agent page: mt-16 between sections.
  </action>
  <verify>Run `cd webapp && npx next build` — builds without errors. Visit /de/accounting and /en/accounting — page renders with all sections and both images.</verify>
  <done>Accounting page renders all sections: header, problem, solution, workflow overview image, 5 workflow steps, n8n technical section with image. Both DE and EN work.</done>
</task>

<task type="auto">
  <name>Task 3: Restructure Technology page to overview</name>
  <files>webapp/app/[locale]/technology/page.tsx, webapp/messages/de.json, webapp/messages/en.json</files>
  <action>
The Technology page currently contains the full Support Agent workflow (6 steps, RAG, tools, security). Since that content now lives on the Support Agent page, restructure Technology into a high-level overview page.

**New Technology page structure:**

1. **Header** — Keep existing title/subtitle
2. **Overview paragraph** — Keep existing t("overview")
3. **Tech Stack section** — NEW section showing the technologies used:
   - n8n (Workflow-Automation)
   - OpenAI GPT-4o (KI-Modell)
   - Qdrant (Vektordatenbank für RAG)
   - Shopify API (E-Commerce-Daten)
   - Google Sheets API (Datenmanagement)
   - WhatsApp Business API (Berichtsversand)

   Use a grid of FeatureCard components (reuse existing import). Use appropriate lucide icons.

4. **Architecture Overview** — Brief paragraph explaining how the components work together

5. **Detail Pages Links** — Two cards/links pointing to:
   - /support-agent — "Supportagent: 6-Schritte-Workflow im Detail"
   - /accounting — "Buchhaltungstool: 5-Schritte-Workflow im Detail"

   Use Link from @/i18n/routing. Style as clickable cards with arrow icon.

**Remove from Technology page:** The workflow steps loop, RAG section, tools section, security section. These now live on Support Agent page.

**Translation changes needed:**

Add to "technology" namespace in de.json:
```json
"techStack": {
  "title": "Technologie-Stack",
  "subtitle": "Die Bausteine von ShopControl AI",
  "n8n": { "title": "n8n", "description": "Open-Source Workflow-Automatisierungsplattform für alle Prozesse" },
  "openai": { "title": "OpenAI GPT-4o", "description": "Multimodales KI-Modell für Textverständnis, Bildanalyse und Antwortgenerierung" },
  "qdrant": { "title": "Qdrant", "description": "Vektordatenbank für das RAG-System — speichert und durchsucht Wissensembeddings" },
  "shopify": { "title": "Shopify API", "description": "Zugriff auf Bestellungen, Produkte und Kundendaten des Online-Shops" },
  "sheets": { "title": "Google Sheets API", "description": "Datenspeicher für Konfigurationen, Logs und Finanzberichte" },
  "whatsapp": { "title": "WhatsApp Business API", "description": "Versand automatisierter Finanzberichte direkt aufs Smartphone" }
},
"architecture": {
  "title": "Architektur-Überblick",
  "description": "Alle Komponenten sind über n8n als zentrale Automatisierungsplattform verbunden. Der KI-Supportagent verarbeitet E-Mails mit GPT-4o und RAG, während das Buchhaltungstool Finanzdaten aus mehreren Quellen sammelt und per WhatsApp versendet."
},
"detailPages": {
  "title": "Im Detail",
  "supportAgent": { "title": "KI-Supportagent", "description": "6-Schritte-Workflow für autonome E-Mail-Kundenbetreuung" },
  "accounting": { "title": "Buchhaltungstool", "description": "5-Schritte-Workflow für automatische Finanzberichterstattung" }
}
```

Add equivalent EN keys:
```json
"techStack": {
  "title": "Technology Stack",
  "subtitle": "The building blocks of ShopControl AI",
  "n8n": { "title": "n8n", "description": "Open-source workflow automation platform for all processes" },
  "openai": { "title": "OpenAI GPT-4o", "description": "Multimodal AI model for text understanding, image analysis, and response generation" },
  "qdrant": { "title": "Qdrant", "description": "Vector database for the RAG system — stores and searches knowledge embeddings" },
  "shopify": { "title": "Shopify API", "description": "Access to orders, products, and customer data from the online store" },
  "sheets": { "title": "Google Sheets API", "description": "Data storage for configurations, logs, and financial reports" },
  "whatsapp": { "title": "WhatsApp Business API", "description": "Automated financial report delivery directly to smartphone" }
},
"architecture": {
  "title": "Architecture Overview",
  "description": "All components are connected through n8n as the central automation platform. The AI support agent processes emails with GPT-4o and RAG, while the accounting tool collects financial data from multiple sources and delivers reports via WhatsApp."
},
"detailPages": {
  "title": "In Detail",
  "supportAgent": { "title": "AI Support Agent", "description": "6-step workflow for autonomous email customer support" },
  "accounting": { "title": "Accounting Tool", "description": "5-step workflow for automated financial reporting" }
}
```

Keep the existing technology.title, technology.subtitle, technology.overview keys. The workflow.*, rag.*, tools.*, security.* keys can remain in JSON (unused keys don't cause errors) — removing them risks breaking other references. Just leave them.

**Technology page.tsx changes:**
- Remove WorkflowStep import and steps array
- Remove ScreenshotFigure import (no longer needed)
- Remove the workflow steps loop, RAG section, tools section, security section
- Add techStack grid with 6 FeatureCard items (use icons: Workflow for n8n, Brain for openai, Database for qdrant, ShoppingCart for shopify, FileSpreadsheet for sheets, MessageCircle for whatsapp)
- Add architecture paragraph
- Add detail pages section with two Link cards
- Import Link from "@/i18n/routing"
- Import new lucide icons: Workflow (or Cog), Brain, MessageCircle
  </action>
  <verify>Run `cd webapp && npx next build` — builds without errors. Technology page at /de/technology shows tech stack grid, architecture overview, and links to support-agent and accounting pages.</verify>
  <done>Technology page restructured to high-level overview with tech stack, architecture, and links to detail pages. No broken references. Both DE and EN work.</done>
</task>

</tasks>

<verification>
1. `cd webapp && npx next build` completes without errors
2. Accounting page at /de/accounting shows all sections with German text and both images
3. Accounting page at /en/accounting shows all sections with English text
4. Technology page at /de/technology shows tech stack grid and links to detail pages
5. Technology page no longer shows the 6 workflow steps (moved to Support Agent)
6. Links on Technology page navigate correctly to /support-agent and /accounting
</verification>

<success_criteria>
- Accounting page fully replaces placeholder with Problem -> Solution -> 5-step workflow -> n8n section
- Both accounting images copied from Matrealien and render correctly
- Technology page restructured to overview (no more workflow steps, RAG, tools, security detail)
- Technology page links to Support Agent and Accounting detail pages
- DE and EN translations complete for both pages
- Build succeeds
</success_criteria>

<output>
After completion, create `.planning/phases/08-supportagent-buchhaltungstool/08-02-SUMMARY.md`
</output>
