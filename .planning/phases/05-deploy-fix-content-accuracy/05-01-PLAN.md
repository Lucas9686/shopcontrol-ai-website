---
phase: 05-deploy-fix-content-accuracy
plan: 01
type: execute
wave: 1
depends_on: []
files_modified: [git index]
autonomous: true

must_haves:
  truths:
    - "All webapp/ files are tracked by git"
    - "No ghost files tracked at repo root (app/, components/, etc.)"
    - "git status shows clean working tree for webapp/ files"
  artifacts:
    - path: "webapp/"
      provides: "All project source files tracked in git"
  key_links:
    - from: "git index"
      to: "Vercel build"
      via: "Vercel reads Root Directory 'webapp/' from git"
      pattern: "git ls-files webapp/"
---

<objective>
Fix git tracking so Vercel deployment works. Currently 52 files are tracked at the repo root (showing as deleted) while the real files in webapp/ are untracked. Remove root-level ghost entries from git index and add all webapp/ files.

Purpose: Vercel cannot build because its Root Directory setting "webapp" finds no tracked files.
Output: Clean git state where all source files are tracked under webapp/.
</objective>

<execution_context>
@C:\Users\Lucas Benutzer\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\Lucas Benutzer\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/05-deploy-fix-content-accuracy/05-RESEARCH.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Remove root-level ghost files from git index and track webapp/ files</name>
  <files>git index (no disk files changed)</files>
  <action>
Run the following git commands to fix the tracking:

1. Remove all root-level tracked files from the git index (these are ghost entries — the files don't exist on disk at root, they live in webapp/):
```bash
git rm -r --cached app/ components/ i18n/ messages/ public/ components.json next.config.mjs package.json pnpm-lock.yaml postcss.config.mjs proxy.ts tsconfig.json
```
Note: Use `--cached` to only affect the index, not disk. Some paths may warn "not found" if already gone — that's fine.

Also ensure `app/globals.css` and `app/layout.tsx` and `app/page.tsx` are covered (they're in the `app/` recursive removal).

2. Add a proper .gitignore if one exists, then add all webapp/ files:
```bash
git add webapp/
```

3. Also add .gitignore if it exists and is untracked:
```bash
git add .gitignore
```

4. Commit the fix:
```bash
git commit -m "fix(05-01): move git tracking from root to webapp/

Root-level files were ghost entries (deleted on disk).
Real source files live in webapp/ and are now properly tracked.
Fixes Vercel build error: Root Directory 'webapp' not found in git."
```

Do NOT add the `Matrealien/`, `Web design/`, `nul`, or `.claude/` directories. Do NOT add `.planning/` unless it's already tracked.
  </action>
  <verify>
Run:
- `git status` — should show no deleted files at root, no untracked webapp/ files
- `git ls-files webapp/ | head -20` — should list webapp/ source files
- `git ls-files app/ components/ i18n/ messages/` — should return empty (no root-level tracking)
  </verify>
  <done>
git tracks all files under webapp/ and no ghost files remain at repo root. `git ls-files app/` returns nothing. `git ls-files webapp/` returns 100+ files.
  </done>
</task>

<task type="auto">
  <name>Task 2: Verify build succeeds locally</name>
  <files>none (verification only)</files>
  <action>
Run the Next.js build from the webapp/ directory to confirm the tracked files produce a successful build:

```bash
cd webapp && npm run build
```

If pnpm is the package manager (check webapp/pnpm-lock.yaml existence), use:
```bash
cd webapp && pnpm install && pnpm build
```

If the build fails, diagnose and fix. Common issues: missing dependencies (run install first), TypeScript errors.
  </action>
  <verify>
Build command exits with code 0. Output shows "Compiled successfully" or similar Next.js success message.
  </verify>
  <done>
`pnpm build` (or `npm run build`) succeeds in webapp/ directory with exit code 0.
  </done>
</task>

</tasks>

<verification>
1. `git ls-files app/ components/ i18n/ messages/ public/` returns empty
2. `git ls-files webapp/ | wc -l` returns 100+
3. `git status` shows clean (no unexpected deletions or untracked files in webapp/)
4. Build succeeds in webapp/ directory
</verification>

<success_criteria>
- Vercel build will succeed with Root Directory "webapp" because all source files are now tracked under webapp/ in git
- No ghost files remain at repo root in git index
- Local build confirms no broken imports or missing files
</success_criteria>

<output>
After completion, create `.planning/phases/05-deploy-fix-content-accuracy/05-01-SUMMARY.md`
</output>
